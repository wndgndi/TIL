# 시스템 콜 이란

​

시스템 호출(system call)은 운영 체제의 커널이 제공하는 서비스에 대해, 응용 프로그램의 요청에 따라 커널에 접근하기 위한 인터페이스이다. 보통 C나 C++과 같은 고급 언어로 작성된 프로그램들은 직접 시스템 호출을 사용할 수 없기 때문에 고급 API를 통해 시스템 호출에 접근하게 하는 방법이다.

**즉, System Call 은 사용자 프로세스가 소프트웨어 인터럽트를 통해 커널의 기능을 이용하기 위한 서비스를 요청하는 하나의 방법이다.**

---

### [ 처리방식 ]

1. 사용자 프로세스가 시스템 콜을 요청하면 제어가 커널로 넘어옴. *(사용자 모드 -> 커널 모드)*

2. 커널은 내부적으로 각각의 시스템 콜을 구분하기 위해 기능별로 고유번호를 할당하고 그 번호에 해당하는 제어루틴을 커널 내부에 정의.

3. 커널은 요청받은 시스템 콜에 대응하는 기능번호를 확인.

4. 커널은 그 번호에 맞는 서비스 루틴을 호출.

5. 서비스 루틴을 모두 처리하고 나면 커널 모드에서 사용자 모드로 다시 전환.

---

### [ 시스템 콜은 왜 필요할까? ]

​

우리가 일반적으로 사용하는 프로그램은 '응용프로그램'이다. 유저레벨의 프로그램은 유저레벨의 함수들 만으로는 많은 기능을 구현하기 힘들기 때문에, `커널(kernel)`의 도움을 반드시 받아야 한다. 이러한 작업은 응용프로그램으로 대표되는 유저 프로세스(User Process)에서 유저모드에서는 수행할 수 없다. 
반드시 커널에 관련된 것은 커널모드로 전환한 후에야, 해당 작업을 수행할 권한이 생긴다. 
커널 모드를 통한 이러한 작업은 반드시 시스템 콜을 통해 수행하도록 설계되어 있다. 

아래 그림(1.13)을 살펴보면 이해가 빠를 것이다.

<br>

![1.13](https://blog.kakaocdn.net/dn/JXwNG/btqw787Kgfe/vmrkitiEEjDI8G9w2mFzUk/img.png)

<Br>

그렇다면 권한은 왜 필요한 것일까? 의문이 생길 수 있다. 
그 이유는 해커가 피해를 입히기 위해 악의적으로 시스템 콜을 사용하는 경우나 초보 사용자가 하드웨어 명령어를 잘 몰라서 아무렇게 함수를 호출했을 경우에 시스템 전체를 망가뜨릴 수도 있기 때문이다. 

따라서 이러한 명령어들은 특별하게 커널 모드에서만 실행할 수 있도록 설계되었고, 만약 유저 모드에서 시스템 콜을 호출할 경우에는 운영체제에서 불법적인 접근이라 여기고 trap을 발생시킨다.

---

### [ System Call 기능 ]

-  사용자 모드에 있는 응용 프로그램이 커널의 기능을 사용할 수 있도록 한다.

-  시스템 호출을 하면 사용자 모드에서 커널 모드로 바뀐다.

-  커널에서 시스템 호출을 처리하면 커널 모드에서 사용자 모드로 돌아가 작업을 계속한다.